<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Sabarwal Law</title>

    <!-- Favicon -->
    <link rel="icon" type="images/png" href="images/fav-icon.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            navy: '#1a2b49',
                            gold: '#c5a059',
                            goldHover: '#b08d4b',
                            dark: '#111827',
                            light: '#f3f4f6'
                        }
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'hero-pattern': "linear-gradient(rgba(26, 43, 73, 0.75), rgba(26, 43, 73, 0.6)), url('https://images.unsplash.com/photo-1589829085413-56de8ae18c73?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80')",
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="text-gray-700 antialiased flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-white shadow-md fixed w-full z-50 top-0 transition-all duration-300" id="header">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex justify-between items-center h-24">
                <a href="index.html" class="flex items-center gap-2">
                    <!-- <div class="w-10 h-10 bg-brand-navy flex items-center justify-center rounded-sm text-brand-gold text-xl font-serif font-bold">S</div> -->
                     <img src="images/Sabarwal-Law.png" alt="Company Logo" class="h-14 w-auto"></a>
                <!-- <div class="flex flex-col"><span class="text-2xl font-serif font-bold text-brand-navy tracking-wide uppercase leading-none">Sabarwal</span><span class="text-sm text-brand-gold tracking-[0.2em] uppercase leading-none mt-1">Law</span></div></a> -->
                <div class="hidden lg:flex items-center space-x-8">
                    <nav class="flex space-x-6 text-sm font-bold uppercase tracking-wider text-brand-navy">
                        <a href="index.html" class="nav-link transition">Home</a>
                        <a href="about.html" class="nav-link transition">About</a>
                        <!-- <div class="relative group">
                            <button class="nav-link hover:text-brand-gold transition flex items-center gap-1">PRACTICE AREAS <i class="fa-solid fa-chevron-down text-xs"></i></button>
                            <div class="dropdown-menu absolute hidden left-0 mt-0 w-56 bg-white shadow-xl border-t-4 border-brand-gold rounded-b-sm">
                                <a href="small-business.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">Small Business Law</a>
                                <a href="employment.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">Employment Law</a>
                                <a href="family.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">Family Law</a>
                                <a href="personal-injury.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold transition">Personal Injury</a>
                            </div>
                        </div> -->
                        <div class="relative group">
                            <button class="nav-link hover:text-brand-gold transition flex items-center gap-1">PRACTICE AREAS <i class="fa-solid fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"></i></button>
                            <div class="absolute left-0 top-full w-56 bg-white shadow-xl border-t-4 border-brand-gold rounded-b-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 z-50">

                                <a href="small-business.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">
                                    Small Business Law
                                </a>

                                <a href="employment.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">
                                    Employment Law
                                </a>

                                <a href="family.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold border-b border-gray-100 transition">
                                    Family Law
                                </a>

                                <a href="personal-injury.html" class="block px-4 py-3 hover:bg-gray-50 text-brand-navy hover:text-brand-gold transition">
                                    Personal Injury
                                </a>

                            </div>
                        </div>

                        <a href="blog.html" class="nav-link transition">Blog</a>
                        <a href="faq.html" class="nav-link transition">F.A.Q.</a>
                        <a href="immigration.html" class="nav-link transition">Immigration Impact</a>
                    </nav>
                    <div class="flex items-center gap-6">
                        <a href="contact.html" class="bg-brand-gold hover:bg-brand-navy text-white text-xs font-bold uppercase tracking-widest px-6 py-3 transition duration-300 rounded-3xl">Contact Us</a>
                        <!-- <a href="tel:5622504471" class="text-brand-navy font-bold hover:text-brand-gold transition">562.250.4471</a> -->
                         <a href="tel:5622504471" class="flex items-center gap-2 text-brand-navy font-bold hover:text-brand-gold transition border-l border-gray-400 pl-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
                            </svg>

                            562.250.4471
                        </a>

                    </div>
                </div>
                <button id="mobile-menu-btn" class="lg:hidden text-brand-navy text-2xl focus:outline-none"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 z-40 bg-white transform translate-x-full transition-transform duration-300 lg:hidden pt-28 px-6 overflow-y-auto">
        <nav class="flex flex-col space-y-4 text-center">
            <a href="index.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Home</a>
            <a href="about.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">About</a>
            <a href="small-business.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Small Business Law</a>
            <a href="employment.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Employment Law</a>
            <a href="family.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Family Law</a>
            <a href="personal-injury.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Personal Injury</a>
            <a href="blog.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Blog</a>
            <a href="faq.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">F.A.Q.</a>
            <a href="immigration.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Immigration Impact</a>
            <a href="tel:5622504471" class="text-xl font-bold text-brand-gold py-4">562.250.4471</a>
            <a href="contact.html" class="text-lg font-bold text-brand-navy py-2 border-b border-gray-100 cursor-pointer">Contact Us</a>
        </nav>
    </div>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-grow">
        <!-- Blog Hero -->
        <section class="relative h-[60vh] min-h-[400px] flex items-center justify-center bg-hero-pattern bg-cover bg-center bg-no-repeat mt-24">
            <div class="text-center text-white px-4 max-w-4xl mx-auto">
                <h2 class="text-sm md:text-base font-bold uppercase tracking-[0.3em] mb-4 text-brand-gold">
                    Legal Insights
                </h2>
                <h1 class="text-5xl md:text-7xl font-serif font-bold mb-4 leading-tight">
                    BLOG
                </h1>
            </div>
        </section>

        <!-- <section class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-serif text-brand-navy mb-10 text-center">
                    Latest Blog Posts
                </h2>

                <div id="blog-posts" class="grid md:grid-cols-3 gap-8"> -->
                    <!-- Posts will load here -->
                <!-- </div>
            </div>
        </section> -->

        <section class="py-20 bg-gray-50">
    <div class="container mx-auto px-6">
        <div class="flex flex-col lg:flex-row gap-10">

            <!-- Blog Posts -->
            <div class="lg:w-3/4">
                <div id="blog-posts" class="grid md:grid-cols-2 gap-8"></div>
            </div>

            <!-- Sidebar -->
            <div class="lg:w-1/4">
                <div class="bg-white shadow-md p-6">
                    <h3 class="text-xl font-serif text-brand-navy mb-6">
                        Monthly Archives
                    </h3>
                    <ul id="month-list" class="space-y-3 text-sm"></ul>
                </div>
            </div>

        </div>
    </div>
</section>


        
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-12 border-t border-gray-800 mt-auto">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <!-- <div class="text-2xl font-serif font-bold text-white uppercase tracking-wide">Sabarwal 
                    <span class="text-brand-gold">Law</span>
                </div> -->
                 <a href="index.html" class="flex items-center gap-2">
                     <img src="images/logo-small.svg" alt="Company Logo" class="h-16 w-auto"></a>
                <div class="text-sm text-center md:text-right">
                    <div class="flex gap-4 justify-center md:justify-end text-xs uppercase tracking-wider">
                        <a href="#" class="hover:text-white">Disclaimer</a>
                        <span class="text-gray-700">|</span>
                        <a href="#" class="hover:text-white">Privacy Policy</a>
                    </div>
                    <p class="mb-2">Copyright ¬© 2025 Sabarwal Law | All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/navigation.js"></script>

    <!-- <script>
    const API_URL = "https://sabarwal.aofenggsys.us/wp-json/wp/v2/posts?_embed";
    const container = document.getElementById("blog-posts");
    const params = new URLSearchParams(window.location.search);
    const postId = params.get("id");

    // üîπ Helper Function: Get Featured Image Safely
    function getFeaturedImage(post) {
        if (post._embedded && post._embedded["wp:featuredmedia"]) {
            return post._embedded["wp:featuredmedia"][0].source_url;
        }
        return "images/default.jpg"; // fallback image
    }

    // üîπ Load Single Post
    function loadSinglePost(posts) {

        const currentIndex = posts.findIndex(p => p.id == postId);

        if (currentIndex === -1) {
            container.innerHTML = "<p class='text-center'>Post not found.</p>";
            return;
        }

        const post = posts[currentIndex];
        const image = getFeaturedImage(post);

        let prevLink = "";
        let nextLink = "";

        if (currentIndex > 0) {
            prevLink = `
                <a href="?id=${posts[currentIndex - 1].id}" 
                class="px-6 py-3 bg-gray-200 hover:bg-brand-gold hover:text-white transition rounded">
                ‚Üê Previous
                </a>
            `;
        }

        if (currentIndex < posts.length - 1) {
            nextLink = `
                <a href="?id=${posts[currentIndex + 1].id}" 
                class="px-6 py-3 bg-gray-200 hover:bg-brand-gold hover:text-white transition rounded">
                Next ‚Üí
                </a>
            `;
        }

        container.classList.remove("md:grid-cols-3");
        container.innerHTML = `
            <div class="col-span-3 bg-white shadow-lg rounded-sm overflow-hidden">
                
                <img src="${image}" class="w-full h-96 object-cover">

                <div class="p-8">
                    <h1 class="text-4xl font-serif text-brand-navy mb-6">
                        ${post.title.rendered}
                    </h1>

                    <div class="text-gray-500 text-sm mb-6">
                        Published on ${new Date(post.date).toLocaleDateString()}
                    </div>

                    <div class="prose max-w-none text-gray-700 mb-10">
                        ${post.content.rendered}
                    </div>

                    <div class="flex justify-between items-center mt-10">
                        ${prevLink}
                        ${nextLink}
                    </div>

                    <div class="mt-8">
                        <a href="blog.html" 
                        class="text-brand-gold font-bold uppercase text-xs tracking-widest">
                        ‚Üê Back to Blog
                        </a>
                    </div>
                </div>
            </div>
        `;
    }

    // üîπ Load Blog List
    function loadBlogList(posts) {

        container.innerHTML = "";

        posts.forEach(post => {

            const image = getFeaturedImage(post);

            const cleanExcerpt = post.excerpt.rendered
                .replace(/<[^>]*>/g, "")
                .substring(0, 120);

            const postHTML = `
                <div class="bg-white shadow-lg rounded-sm overflow-hidden hover:shadow-xl transition duration-300">
                    
                    <img src="${image}" 
                        class="w-full h-56 object-cover">

                    <div class="p-6">
                        <h3 class="text-xl font-serif text-brand-navy mb-3">
                            ${post.title.rendered}
                        </h3>

                        <p class="text-gray-600 text-sm mb-4">
                            ${cleanExcerpt}...
                        </p>

                        <a href="?id=${post.id}" 
                        class="text-brand-gold font-bold uppercase text-xs tracking-widest hover:underline">
                        Read More
                        </a>
                    </div>
                </div>
            `;

            container.innerHTML += postHTML;
        });
    }

    // üîπ Main Fetch
    fetch(API_URL)
        .then(response => response.json())
        .then(posts => {

            if (postId) {
                loadSinglePost(posts);
            } else {
                loadBlogList(posts);
            }

        })
        .catch(error => {
            console.error("Error loading blog:", error);
            container.innerHTML = `
                <p class="text-center text-red-500">
                    Unable to load blog posts. Please try again later.
                </p>
            `;
        });
    </script> -->

    <script>
//const API_URL = "https://sabarwal.aofenggsys.us/wp-json/wp/v2/posts?_embed&per_page=100";
const API_URL = "https://sabarwallaw.com/wp-json/wp/v2/posts?_embed&per_page=100";

const container = document.getElementById("blog-posts");
const monthList = document.getElementById("month-list");

const params = new URLSearchParams(window.location.search);
const postId = params.get("id");

let allPosts = [];
let activeMonth = null;

// üîπ Get Featured Image Safely
function getImage(post) {
    if (post._embedded && post._embedded["wp:featuredmedia"]) {
        return post._embedded["wp:featuredmedia"][0].source_url;
    }
    return "images/default.jpg";
}

// üîπ Render Blog List
function renderPosts(posts) {

    container.classList.add("grid", "md:grid-cols-2");
    container.innerHTML = "";

    if (posts.length === 0) {
        container.innerHTML = "<p>No posts found.</p>";
        return;
    }

    posts.forEach(post => {

        const image = getImage(post);
        const excerpt = post.excerpt.rendered
            .replace(/<[^>]*>/g, "")
            .substring(0, 120);

        container.innerHTML += `
            <div class="bg-white shadow-lg rounded overflow-hidden hover:shadow-xl transition">
                <!-- <img src="${image}" class="w-full h-56 object-cover"> -->
                <div class="p-6">
                    <h3 class="text-xl font-serif text-brand-navy mb-3">
                        ${post.title.rendered}
                    </h3>
                    <p class="text-gray-600 text-sm mb-4">
                        ${excerpt}...
                    </p>
                    <a href="?id=${post.id}" 
                       class="text-brand-gold font-bold uppercase text-xs">
                       Read More
                    </a>
                </div>
            </div>
        `;
    });
}

// üîπ Render Single Post
function renderSinglePost(posts) {

    const index = posts.findIndex(p => p.id == postId);

    if (index === -1) {
        container.innerHTML = "<p>Post not found.</p>";
        return;
    }

    const post = posts[index];
    const image = getImage(post);

    let prevBtn = "";
    let nextBtn = "";

    if (index > 0) {
        prevBtn = `
            <a href="?id=${posts[index - 1].id}" 
               class="px-4 py-2 bg-gray-200 hover:bg-brand-gold hover:text-white rounded">
               ‚Üê Previous
            </a>
        `;
    }

    if (index < posts.length - 1) {
        nextBtn = `
            <a href="?id=${posts[index + 1].id}" 
               class="px-4 py-2 bg-gray-200 hover:bg-brand-gold hover:text-white rounded">
               Next ‚Üí
            </a>
        `;
    }

    container.classList.remove("md:grid-cols-2");
    container.innerHTML = `
        <div class="col-span-2 bg-white shadow-lg rounded overflow-hidden">
            <!-- <img src="${image}" class="w-full h-96 object-cover"> -->

            <div class="p-8">
                <h1 class="text-4xl font-serif text-brand-navy mb-6">
                    ${post.title.rendered}
                </h1>

                <div class="text-gray-500 text-sm mb-6">
                    Published on ${new Date(post.date).toLocaleDateString()}
                </div>

                <div class="prose max-w-none text-gray-700 mb-10">
                    ${post.content.rendered}
                </div>

                <div class="flex justify-between mt-8">
                    ${prevBtn}
                    ${nextBtn}
                </div>

                <div class="mt-8">
                    <a href="blog.html" 
                       class="text-brand-gold font-bold uppercase text-xs">
                       ‚Üê Back to Blog
                    </a>
                </div>
            </div>
        </div>
    `;
}

// üîπ Build Monthly Sidebar (Always Visible)
function buildMonthly(posts) {

    const months = {};

    posts.forEach(post => {
        const date = new Date(post.date);
        const key = date.toLocaleString('default', { month: 'long', year: 'numeric' });

        if (!months[key]) months[key] = [];
        months[key].push(post);
    });

    const sorted = Object.keys(months)
        .sort((a, b) => new Date(b) - new Date(a));

    monthList.innerHTML = `
        <li>
            <a href="#" data-month="all" class="block hover:text-brand-gold font-medium">
                All Posts
            </a>
        </li>
    `;

    sorted.forEach(month => {
        monthList.innerHTML += `
            <li>
                <a href="#" data-month="${month}" 
                   class="block hover:text-brand-gold">
                    ${month} (${months[month].length})
                </a>
            </li>
        `;
    });

    monthList.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", e => {
            e.preventDefault();

            activeMonth = link.dataset.month;

            if (activeMonth === "all") {
                renderPosts(allPosts);
            } else {
                const filtered = allPosts.filter(post => {
                    const date = new Date(post.date);
                    const key = date.toLocaleString('default', { month: 'long', year: 'numeric' });
                    return key === activeMonth;
                });

                renderPosts(filtered);
            }
        });
    });
}

// üîπ Fetch Data
fetch(API_URL)
    .then(res => res.json())
    .then(posts => {

        allPosts = posts;

        // ALWAYS build sidebar
        buildMonthly(posts);

        if (postId) {
            renderSinglePost(posts);
        } else {
            renderPosts(posts);
        }

    })
    .catch(error => {
        console.error("Error:", error);
        container.innerHTML = "<p>Error loading posts.</p>";
    });
</script>





</body>
</html>
